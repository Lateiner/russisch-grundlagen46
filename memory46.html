<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch Memory: Arbeiten mit Präfixen</title>
    <style>
        :root {
            --primary: #5e35b1; /* Deep Purple */
            --secondary: #00897b; /* Teal */
            --bg: #eceff1;
            --card-back: #3949ab; /* Card cover color */
            --text-ru: #283593;
            --text-de: #c62828;
            --white: #ffffff;
            --success: #4caf50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            user-select: none;
        }

        .container {
            width: 100%;
            max-width: 900px;
        }

        h1 {
            color: #37474f;
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            font-weight: bold;
            color: #546e7a;
        }

        /* GRID STYLES */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            perspective: 1000px;
        }

        /* CARD STYLES */
        .card {
            background-color: transparent;
            aspect-ratio: 3 / 2;
            cursor: pointer;
            position: relative;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* Flip state */
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        /* Matched state (Standard Game) */
        .card.matched .card-inner {
            transform: rotateY(180deg);
        }
        .card.matched .card-front {
            background-color: #e8f5e9; /* Default success color */
            border: 2px solid var(--success);
            opacity: 1;
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
            font-weight: bold;
        }

        /* Front = Content */
        .card-front {
            background-color: var(--white);
            color: #333;
            transform: rotateY(180deg);
            font-size: 1rem;
            display: flex;
            flex-direction: column;
            line-height: 1.3;
            border: 2px solid transparent; /* Placeholder for border */
            transition: background-color 0.3s;
        }

        /* Back = Cover */
        .card-back {
            background: linear-gradient(135deg, var(--card-back), #5c6bc0);
            color: white;
            font-size: 2rem;
        }
        
        .card-back::after {
            content: "★";
            opacity: 0.3;
        }

        .lang-ru { color: var(--text-ru); font-size: 1.1rem; }
        .lang-de { color: var(--text-de); font-size: 0.95rem; font-style: italic; }

        /* Controls */
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        button:active { transform: scale(0.98); }

        .btn-reset { background-color: var(--secondary); }
        .btn-solve { background-color: #ff9800; }

        /* Success Overlay */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            color: white;
            text-align: center;
        }
        .overlay h2 { font-size: 3rem; margin: 0 0 20px 0; color: #4caf50; }
        .overlay p { font-size: 1.5rem; margin-bottom: 30px; }

        /* Responsive */
        @media (max-width: 768px) {
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .card-front { font-size: 0.9rem; }
        }

        @media (max-width: 500px) {
            .memory-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            .card { aspect-ratio: 4 / 3; }
            .lang-ru { font-size: 1rem; }
            .lang-de { font-size: 0.85rem; }
            .stats-bar { font-size: 0.9rem; padding: 10px; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Memory: работать</h1>
    
    <div class="stats-bar">
        <span>Züge: <span id="moveCount">0</span></span>
        <span>Paare: <span id="pairCount">0</span>/8</span>
    </div>

    <div class="memory-grid" id="grid">
        <!-- Cards injected via JS -->
    </div>

    <div class="controls">
        <button class="btn-reset" onclick="initGame()">Spiel neu starten</button>
        <button class="btn-solve" onclick="showSolution()">Lösung anzeigen</button>
    </div>
</div>

<div class="overlay" id="victoryOverlay">
    <h2>Gewonnen!</h2>
    <p>Du hast alle Paare gefunden!</p>
    <button class="btn-reset" onclick="initGame()">Noch einmal spielen</button>
</div>

<script>
    const dataPairs = [
        { ru: "заработать", de: "Geld verdienen /<br>Starten (Maschine)" },
        { ru: "сработаться", de: "sich gut verstehen /<br>einspielen" },
        { ru: "переработать", de: "recyceln /<br>Überstunden machen" },
        { ru: "подрабатывать", de: "dazuverdienen /<br>jobben" },
        { ru: "проработать", de: "eine Zeit lang arbeiten" },
        { ru: "разработать", de: "entwickeln (Plan)" },
        { ru: "доработать", de: "fertigstellen /<br>verbessern" },
        { ru: "отработать", de: "Technik üben /<br>Schulden abarbeiten" }
    ];

    // Eine Palette von 8 Pastellfarben für die 8 Paare
    const pairColors = [
        '#FFCDD2', // Light Red
        '#C8E6C9', // Light Green
        '#BBDEFB', // Light Blue
        '#FFF9C4', // Light Yellow
        '#E1BEE7', // Light Purple
        '#FFE0B2', // Light Orange
        '#B2DFDB', // Light Teal
        '#CFD8DC'  // Light Grey
    ];

    let cardsArray = [];
    let hasFlippedCard = false;
    let lockBoard = false;
    let firstCard, secondCard;
    let moves = 0;
    let pairsFound = 0;

    const grid = document.getElementById('grid');
    const moveDisplay = document.getElementById('moveCount');
    const pairDisplay = document.getElementById('pairCount');
    const overlay = document.getElementById('victoryOverlay');

    function initGame() {
        // Reset State
        hasFlippedCard = false;
        lockBoard = false;
        firstCard = null;
        secondCard = null;
        moves = 0;
        pairsFound = 0;
        moveDisplay.textContent = moves;
        pairDisplay.textContent = pairsFound;
        overlay.style.display = 'none';
        
        // Create Cards
        cardsArray = [];
        dataPairs.forEach((item, index) => {
            cardsArray.push({ id: index, content: `<span class="lang-ru">${item.ru}</span>`, type: 'ru' });
            cardsArray.push({ id: index, content: `<span class="lang-de">${item.de}</span>`, type: 'de' });
        });

        // Shuffle
        cardsArray.sort(() => 0.5 - Math.random());

        // Render
        grid.innerHTML = '';
        cardsArray.forEach(cardData => {
            const card = document.createElement('div');
            card.classList.add('card');
            card.dataset.id = cardData.id;

            card.innerHTML = `
                <div class="card-inner">
                    <div class="card-face card-front">
                        ${cardData.content}
                    </div>
                    <div class="card-face card-back"></div>
                </div>
            `;

            card.addEventListener('click', flipCard);
            grid.appendChild(card);
        });
    }

    function flipCard() {
        if (lockBoard) return;
        if (this === firstCard) return;

        this.classList.add('flipped');

        if (!hasFlippedCard) {
            hasFlippedCard = true;
            firstCard = this;
            return;
        }

        secondCard = this;
        incrementMoves();
        checkForMatch();
    }

    function incrementMoves() {
        moves++;
        moveDisplay.textContent = moves;
    }

    function checkForMatch() {
        let isMatch = firstCard.dataset.id === secondCard.dataset.id;

        if (isMatch) {
            disableCards();
        } else {
            unflipCards();
        }
    }

    function disableCards() {
        lockBoard = true;
        
        setTimeout(() => {
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');
            
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);

            pairsFound++;
            pairDisplay.textContent = pairsFound;

            resetBoard();

            if (pairsFound === dataPairs.length) {
                setTimeout(() => {
                    overlay.style.display = 'flex';
                }, 500);
            }
        }, 400);
    }

    function unflipCards() {
        lockBoard = true;

        setTimeout(() => {
            firstCard.classList.remove('flipped');
            secondCard.classList.remove('flipped');
            resetBoard();
        }, 1200);
    }

    function resetBoard() {
        [hasFlippedCard, lockBoard] = [false, false];
        [firstCard, secondCard] = [null, null];
    }

    function showSolution() {
        lockBoard = true; // Stop user interaction
        const allCards = document.querySelectorAll('.card');
        
        allCards.forEach(card => {
            // Flip every card
            card.classList.add('flipped');
            
            // Get the ID (0-7)
            const id = card.dataset.id;
            
            // Apply the unique color for this pair
            // We also add a colored border to highlight the grouping better
            const frontFace = card.querySelector('.card-front');
            frontFace.style.backgroundColor = pairColors[id];
            frontFace.style.borderColor = '#999'; // Subtle border to distinguish cards
            
            // Remove 'matched' styling if present to ensure uniform look
            card.classList.remove('matched');
            frontFace.style.opacity = '1';
        });
    }

    // Start on load
    initGame();

</script>

</body>
</html>